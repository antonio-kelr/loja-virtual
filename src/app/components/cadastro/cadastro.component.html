<app-nav></app-nav>

<div class="cadastro-container">
  <div class="cadastro-card">
    <h2>Criar Conta</h2>

    <div class="social-login">
      <button class="btn-social google" (click)="loginComGoogle()" [disabled]="isLoading">
        <img src="https://img.freepik.com/vetores-premium/impressao-criativa-de-design-de-logotipo-moderno-em-cores-completas_1271730-562.jpg?semt=ais_hybrid&w=740" alt="Google">
        {{ isLoading ? 'Carregando...' : 'Continuar com Google' }}
      </button>
      <button class="btn-social facebook" [disabled]="isLoading">
        <img src="https://static.vecteezy.com/system/resources/previews/018/930/476/non_2x/facebook-logo-facebook-icon-transparent-free-png.png" alt="Facebook">
        Continuar com Facebook
      </button>
    </div>

    <div class="divider">
      <span>ou</span>
    </div>

    <form [formGroup]="cadastroForm" (ngSubmit)="onSubmit()" class="cadastro-form">
      <div class="form-group">
        <label for="nome">Nome completo</label>
        <input
          type="text"
          id="nome"
          formControlName="nome"
          placeholder="Digite seu nome completo"
          [class.erro]="cadastroForm.get('nome')?.invalid && cadastroForm.get('nome')?.touched"
        >
        <div class="erro-mensagem" *ngIf="cadastroForm.get('nome')?.invalid && cadastroForm.get('nome')?.touched">
          <span *ngIf="cadastroForm.get('nome')?.errors?.['required']">Nome é obrigatório</span>
          <span *ngIf="cadastroForm.get('nome')?.errors?.['minlength']">Nome deve ter no mínimo 3 caracteres</span>
        </div>
      </div>

      <div class="form-group">
        <label for="email">E-mail</label>
        <input
          type="email"
          id="email"
          formControlName="email"
          placeholder="Digite seu e-mail"
          [class.erro]="cadastroForm.get('email')?.invalid && cadastroForm.get('email')?.touched"
        >
        <div class="erro-mensagem" *ngIf="cadastroForm.get('email')?.invalid && cadastroForm.get('email')?.touched">
          <span *ngIf="cadastroForm.get('email')?.errors?.['required']">E-mail é obrigatório</span>
          <span *ngIf="cadastroForm.get('email')?.errors?.['email']">E-mail inválido</span>
        </div>
      </div>

      <div class="form-group">
        <label for="cpf">CPF</label>
        <input
          type="text"
          id="cpf"
          formControlName="cpf"
          placeholder="Digite seu CPF"
          (input)="formatarCPF($event)"
          [class.erro]="cadastroForm.get('cpf')?.invalid && cadastroForm.get('cpf')?.touched"
        >
        <div class="erro-mensagem" *ngIf="cadastroForm.get('cpf')?.invalid && cadastroForm.get('cpf')?.touched">
          <span *ngIf="cadastroForm.get('cpf')?.errors?.['required']">CPF é obrigatório</span>
          <span *ngIf="cadastroForm.get('cpf')?.errors?.['pattern']">CPF inválido</span>
        </div>
      </div>

      <div class="form-group">
        <label for="dataNascimento">Data de Nascimento</label>
        <input
          type="date"
          id="dataNascimento"
          formControlName="dataNascimento"
          [class.erro]="cadastroForm.get('dataNascimento')?.invalid && cadastroForm.get('dataNascimento')?.touched"
        >
        <div class="erro-mensagem" *ngIf="cadastroForm.get('dataNascimento')?.invalid && cadastroForm.get('dataNascimento')?.touched">
          <span *ngIf="cadastroForm.get('dataNascimento')?.errors?.['required']">Data de nascimento é obrigatória</span>
        </div>
      </div>

      <div class="form-group">
        <label for="genero">Gênero</label>
        <select
          id="genero"
          formControlName="genero"
          [class.erro]="cadastroForm.get('genero')?.invalid && cadastroForm.get('genero')?.touched"
        >
          <option value="">Selecione</option>
          <option *ngFor="let genero of generos" [value]="genero">{{genero}}</option>
        </select>
        <div class="erro-mensagem" *ngIf="cadastroForm.get('genero')?.invalid && cadastroForm.get('genero')?.touched">
          <span *ngIf="cadastroForm.get('genero')?.errors?.['required']">Gênero é obrigatório</span>
        </div>
      </div>

      <div class="form-group">
        <label for="telefone">Telefone</label>
        <input
          type="text"
          id="telefone"
          formControlName="telefone"
          placeholder="Digite seu telefone"
          (input)="formatarTelefone($event)"
        >
      </div>

      <div class="form-group">
        <label for="senha">Senha</label>
        <input
          type="password"
          id="senha"
          formControlName="senha"
          [class.erro]="cadastroForm.get('senha')?.invalid && cadastroForm.get('senha')?.touched"
          placeholder="Digite sua senha"
        />
        <div class="erro-mensagem" *ngIf="cadastroForm.get('senha')?.invalid && cadastroForm.get('senha')?.touched">
          <span *ngIf="cadastroForm.get('senha')?.errors?.['required']">Senha é obrigatória</span>
          <span *ngIf="cadastroForm.get('senha')?.errors?.['minlength']">Senha deve ter no mínimo 6 caracteres</span>
        </div>
      </div>

      <div class="form-group">
        <label for="confirmarSenha">Confirmar Senha</label>
        <input
          type="password"
          id="confirmarSenha"
          formControlName="confirmarSenha"
          [class.erro]="cadastroForm.get('confirmarSenha')?.invalid && cadastroForm.get('confirmarSenha')?.touched"
          placeholder="Confirme sua senha"
        />
        <div class="erro-mensagem" *ngIf="cadastroForm.get('confirmarSenha')?.invalid && cadastroForm.get('confirmarSenha')?.touched">
          <span *ngIf="cadastroForm.get('confirmarSenha')?.errors?.['required']">Confirmação de senha é obrigatória</span>
          <span *ngIf="cadastroForm.get('confirmarSenha')?.errors?.['senhasDiferentes']">As senhas não conferem</span>
        </div>
      </div>

      <button type="submit" [disabled]="cadastroForm.invalid" class="btn-cadastrar">Criar Conta</button>
    </form>

    <div class="login-link">
      Já tem uma conta? <a (click)="irParaLogin()">Faça login</a>
    </div>
  </div>
</div>

<app-footer></app-footer>
